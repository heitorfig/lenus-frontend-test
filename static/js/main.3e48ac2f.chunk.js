(this["webpackJsonplenus-frontend-test"]=this["webpackJsonplenus-frontend-test"]||[]).push([[0],{134:function(e,t,n){"use strict";n.r(t);var i,a=n(0),r=n.n(a),c=n(37),o=n.n(c),s=n(202),l=n(201),u=n(203),d=n(38),h=n(44),g=n(5),b=n(1),j=Object(g.a)((function(e){return Object(b.jsx)(l.a,Object(d.a)({component:"header"},e))}))(i||(i=Object(h.a)(["\n  position: -webkit-sticky;\n  position: sticky;\n  top: 0;\n  -webkit-transition: top 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;\n  transition: top 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;\n  z-index: 1100;\n  -webkit-backdrop-filter: blur(20px);\n  backdrop-filter: blur(20px);\n  box-shadow: inset 0px -1px 1px #eaeef3;\n  background-color: rgba(255,255,255,0.72);\n"]))),f=n(8),x=n(69),O=n(17),m=n.n(O),p=n(23),w=n(30),v=n(31),y=function(){function e(){Object(w.a)(this,e),this.storageKey="weightHistory",this.weightHistory=[],this.weightHistory=JSON.parse(localStorage.getItem(this.storageKey)||"[]").map((function(e){return e.date=new Date(e.date),e}))}return Object(v.a)(e,[{key:"save",value:function(){localStorage.setItem(this.storageKey,JSON.stringify(this.weightHistory))}},{key:"clear",value:function(){this.weightHistory=[],localStorage.removeItem(this.storageKey)}},{key:"add",value:function(e){var t=this;return new Promise((function(n){e.id=Math.random().toString(36).substring(2,9),t.weightHistory.push(e),t.save(),n(e)}))}},{key:"update",value:function(e,t){var n=this;return new Promise((function(i){var a=n.weightHistory.find((function(t){return t.id===e}));a&&(Object.assign(a,t),n.save(),i(a)),i(null)}))}},{key:"delete",value:function(e){var t=this;return new Promise((function(n){t.weightHistory.find((function(t){return t.id===e.id}))&&(t.weightHistory=t.weightHistory.filter((function(t){return t.id!==e.id})),t.save(),n(!0)),n(!1)}))}},{key:"getAll",value:function(e){var t=this;return new Promise((function(n){n(t.weightHistory.filter((function(t){return t.userId===e.userId})).sort((function(e,t){return t.date.getTime()-e.date.getTime()})))}))}},{key:"getCurrentWeight",value:function(){var e=Object(p.a)(m.a.mark((function e(t){var n,i,a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getAll(t);case 2:return n=e.sent,i=n.slice(-1),a=Object(f.a)(i,1),r=a[0],e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),k=new y,C=n(206),S=n(197),D=n(193),H=n(190),L=n(205),W=n(204),F=n(207),I=n(95),E=n.n(I),P=n(97),A=n(196),V=n(186),T=n(195),z=["name","label","control","rules","disableFuture","defaultValue"],J=function(e){var t=e.name,n=e.label,i=e.control,a=e.rules,r=e.disableFuture,c=e.defaultValue,o=Object(P.a)(e,z),s=r?new Date:void 0;return Object(b.jsx)(V.b,{dateAdapter:A.a,children:Object(b.jsx)(x.a,{name:t,control:i,rules:a,defaultValue:c,shouldUnregister:!0,render:function(e){var t=e.field,i=t.onChange,a=t.value;return Object(b.jsx)(T.a,{maxDate:s,disableFuture:r,onChange:i,value:a,label:n,renderInput:function(e){return Object(b.jsx)(S.a,Object(d.a)(Object(d.a)({},e),o))}})}})})},K=function(e){var t=e.weightLog;return Object(b.jsxs)(D.a,{sx:{mb:3},"data-testid":"current-weight",children:[Object(b.jsx)(s.a,{variant:"subtitle1",component:"span",children:"Your Current Weight"}),Object(b.jsxs)(s.a,{variant:"h1",component:"div",sx:{fontWeight:700},color:"primary",children:[t?t.weight:"0.0",Object(b.jsx)("small",{children:"kg"})]})]})},M=n(209),U=n(211),q=n(210),B=n(208),N=n(93),Y=n.n(N),R=n(94),_=n.n(R);function G(e){return e.toLocaleDateString("en-US",{day:"2-digit",month:"2-digit",year:"numeric"})}var Q=function(e){var t=e.weightLog,n=e.onEditClick,i=e.onDeleteClick;return Object(b.jsx)(M.a,{variant:"outlined",sx:{mb:2},"data-testid":"log-weight-card",children:Object(b.jsx)(q.a,{children:Object(b.jsxs)(D.a,{direction:"row",justifyContent:"space-between",alignItems:"center",spacing:2,children:[Object(b.jsx)(s.a,{variant:"subtitle1",color:"text.secondary",component:"div",children:G(t.date)}),Object(b.jsxs)(s.a,{component:"div",variant:"h4",sx:{fontWeight:500},children:[t.weight,"kg"]}),Object(b.jsxs)(U.a,{disableSpacing:!0,children:[n&&Object(b.jsx)(B.a,{color:"primary","aria-label":"Edit Weight Log",onClick:function(){return n(t)},children:Object(b.jsx)(Y.a,{})}),i&&Object(b.jsx)(B.a,{color:"error","aria-label":"Delete Weight Log",onClick:function(){return i(t)},children:Object(b.jsx)(_.a,{})})]})]})})},"weightLog_".concat(t.id))},X=function(e){var t=e.weightHistory,n=e.onEditClick,i=e.onDeleteClick;return Object(b.jsx)("div",{"data-testid":"weight-history",children:t.map((function(e){return Object(b.jsx)(Q,{weightLog:e,onEditClick:n,onDeleteClick:i},e.id)}))})},Z=function(){var e=Object(a.useState)(!1),t=Object(f.a)(e,2),n=t[0],i=t[1],r=Object(a.useState)(),c=Object(f.a)(r,2),o=c[0],s=c[1],h=Object(a.useState)(),g=Object(f.a)(h,2),j=g[0],O=g[1],m=Object(a.useState)([]),p=Object(f.a)(m,2),w=p[0],v=p[1],y=Object(x.b)({mode:"onChange"}),I=y.register,P=y.control,A=y.setValue,V=y.handleSubmit,T=y.reset,z=y.formState.isValid,M=y.watch;Object(a.useEffect)((function(){U()}),[]);var U=function(){k.getAll({userId:"#1"}).then((function(e){v(e),O(e[0])}))},q=function(){i(!1),s(null),T()},B=function(){q()};return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(l.a,{component:"main",sx:{mt:2,mb:2},children:Object(b.jsxs)(u.a,{maxWidth:"sm",sx:{textAlign:"center"},children:[Object(b.jsx)(K,{weightLog:j}),Object(b.jsxs)(C.a,{variant:"contained",disableElevation:!0,size:"large",sx:{mb:2},onClick:function(){i(!0),s(null),T()},"data-testid":"log-weight-button",children:[Object(b.jsx)(E.a,{})," ",w.length>0?"Log a Weight Change":"Log Your Weight"]}),Object(b.jsx)(X,{weightHistory:w,onEditClick:function(e){i(!0),s(e),A("weight",e.weight),A("date",e.date)},onDeleteClick:function(e){k.delete(e).then((function(){U()}))}})]})}),Object(b.jsx)(H.a,{open:n,onClose:B,"data-testid":"log-weight-dialog",children:Object(b.jsxs)("form",{onSubmit:V((function(e){e.userId="#1",(o&&o.id?k.update(o.id,e):k.add(e)).then((function(){U()})),q()})),children:[Object(b.jsx)(F.a,{"data-testid":"log-weight-dialog-title",children:o?"Update Weight Log from ".concat(G(o.date)):"Logging Weight Change"}),Object(b.jsx)(W.a,{children:Object(b.jsxs)(D.a,{sx:{mt:2},direction:"row",spacing:2,children:[Object(b.jsx)(J,{name:"date",label:"Date of Measurement",control:P,rules:{required:!0},disableFuture:!0,defaultValue:new Date,"data-testid":"log-weight-dialog-date-input"}),Object(b.jsx)(S.a,Object(d.a)(Object(d.a)({type:"number",label:"Weight (kg)"},I("weight",{required:!0,min:.01})),{},{inputProps:{step:"0.01"},"data-testid":"log-weight-dialog-weight-input"}))]})}),Object(b.jsxs)(L.a,{children:[Object(b.jsx)(C.a,{color:"error",onClick:B,"data-testid":"log-weight-dialog-cancel",children:"Cancel"}),Object(b.jsx)(C.a,{type:"submit","data-testid":"log-weight-dialog-submit",disabled:!function(){var e=new Date,t=new Date(M("date"));return z&&t<=e}(),children:"Save"})]})]})})]})},$=function(){return Object(b.jsxs)(l.a,{children:[Object(b.jsx)(j,{children:Object(b.jsx)(u.a,{sx:{minHeight:"60px",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center"},fixed:!0,children:Object(b.jsx)(s.a,{variant:"h5",component:"h1",sx:{fontWeight:700},color:"primary",children:"Weight Tracker"})})}),Object(b.jsx)(Z,{})]})},ee=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,212)).then((function(t){var n=t.getCLS,i=t.getFID,a=t.getFCP,r=t.getLCP,c=t.getTTFB;n(e),i(e),a(e),r(e),c(e)}))},te=n(194),ne=n(199),ie=n(96),ae=Object(ie.a)({palette:{background:{default:"#F3F6F9"}},typography:{fontFamily:"Poppins, sans-serif"},shape:{borderRadius:8}});o.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsxs)(ne.a,{theme:ae,children:[Object(b.jsx)(te.a,{}),Object(b.jsx)($,{})]})}),document.getElementById("root")),ee()}},[[134,1,2]]]);
//# sourceMappingURL=main.3e48ac2f.chunk.js.map